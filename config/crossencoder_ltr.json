{
    "data": {
        "path": "data/winemag-data-130k-v2.csv",
        "query_path": "data/pseudo_queries.csv",
        "val_size": 0.1,
        "test_size": 0.1,
        "num_negatives": 2
    },
    "model": {
        "type": "two-stage-retriever",
        "path": "src/model/crossencoder_ltr.py",
        "bi_encoder": {
            "model_name": "all-mpnet-base-v2",
            "max_seq_length": 256
        },
        "cross_encoder": {
            "model_name": "cross-encoder/ms-marco-MiniLM-L-6-v2",
            "max_seq_length": 512,
            "num_labels": 1,
            "activation_function": "Sigmoid"
        }
    },
    "train": {
        "bi_encoder":{
            "re_train": true,
            "epochs": 3,
            "learning_rate": 2e-5,
            "scheduler": "WarmupLinear",
            "warmup_steps": 1000,
            "train_batch_size": 16,
            "weight_decay": 0.01,
            "max_grad_norm": 1.0,
            "use_amp": true,
            "loss_function": "TripletLoss",
            "triplet_margin": 0.5,
            "output_dir": "models/crossencoder_stage1_trained",
            "eval_steps": 500,
            "save_best_model": true
        },
        "cross_encoder": {
            "re_train": true,
            "epochs": 3,
            "learning_rate": 2e-5,
            "scheduler": "WarmupLinear",
            "warmup_steps": 1000,
            "train_batch_size": 8,
            "pos_neg_ratio": 4,
            "weight_decay": 0.01,
            "max_grad_norm": 1.0,
            "use_amp": true,
            "output_dir": "models/crossencoder_stage2_trained",
            "eval_steps": 500,
            "save_best_model": true
        }
    },
    "evaluate": {
        "retrieval_k": 50,
        "top_k": 10,
        "batch_size": 256,
        "embedding_path": "data/embeddings/biencoder_ltr_faiss.index"
    },
    "device": "cuda",
    "random_state": 42
}
